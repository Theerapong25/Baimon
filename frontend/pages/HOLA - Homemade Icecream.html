<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HOLA - Homemade</title>
  <style>
    :root{
      --bg:#f4f4f9;--card:#fff;--muted:#666;--ink:#333;
      --brand:#B95E82;--brand-100:#f9c1e0;--brand-200:#e88bc1;--ring:#eaeaea;
      --ok:#14b8a6;--warn:#f59e0b;--bad:#ef4444;--gray:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,"Segoe UI",Arial,sans-serif;background:var(--bg);margin:0;color:var(--ink)}

    .cafe-detail{width:min(1100px,85%);margin:40px auto;background:var(--card);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:24px 24px 28px}

    /* Header */
    .header{display:flex;align-items:center;justify-content:space-between;border-bottom:1.5px solid var(--ring);padding-bottom:12px}
    .header h2{margin:0;font-size:26px;letter-spacing:.2px}
    .close-btn{background:#f44336;color:#fff;border:0;padding:10px 16px;border-radius:10px;cursor:pointer;transition:filter .15s ease}
    .close-btn:hover{filter:brightness(.95)}

    /* Tabs */
    .tabs{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-top:16px}
    .tab{padding:10px 16px;font-size:15px;background:#f1f1f1;border:2px solid #ddd;border-radius:999px;color:var(--muted);cursor:pointer;transition:.18s}
    .tab.active{background:var(--brand-100);color:#851212;border-color:var(--brand)}
    .tab:hover{background:#ececec}

    /* Content layout */
    .content{display:flex;gap:20px;margin-top:20px}
    .map{flex:2;border-radius:14px;overflow:hidden}
    .map iframe{width:100%;height:420px;border:0}
    .info{flex:1;background:#fafafa;border-radius:14px;padding:16px;box-shadow:0 4px 10px rgba(0,0,0,.06)}

    /* ===== Gallery ===== */
    .gallery-container{position:relative;max-width:100%;overflow:hidden;border-radius:14px;box-shadow:0 4px 12px rgba(0,0,0,.12);aspect-ratio:16/9;background:#000}
    .slides{display:flex;height:100%;transition:transform .5s ease}
    .slides img{flex:0 0 100%;width:100%;height:100%;object-fit:cover;image-rendering:auto;user-select:none;pointer-events:none}
    .gallery-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.55);color:#fff;border:none;font-size:22px;line-height:1;padding:9px 12px;border-radius:999px;cursor:pointer}
    .gallery-btn:focus{outline:3px solid rgba(255,255,255,.6)}
    .prev{left:10px}.next{right:10px}

    /* ===== Menu list ===== */
    .menu-dark{background:#F2EAD3;border-radius:16px;padding:14px;border:1px solid #ddd}
    .menu-dark h3{margin:4px 8px 8px;font-size:16px;color:#475569}
    .drink-list{list-style:none;margin:0;padding:8px}
    .drink-item{display:flex;align-items:center;justify-content:space-between;background:var(--brand);border-radius:14px;padding:16px 18px;margin:10px 0;box-shadow:0 2px 0 rgb(188,23,23), inset 0 0 0 1px rgba(255,255,255,.08);transition:transform .15s ease, box-shadow .2s ease, background .2s ease;cursor:pointer}
    .drink-item:hover{transform:translateY(-1px);background:var(--brand-200);box-shadow:0 10px 26px rgba(0,0,0,.18), inset 0 0 0 1px rgba(255,255,255,.16)}
    .drink-name{font-size:17px;font-weight:600;color:#f8fafc;letter-spacing:.1px}
    .price{font-weight:700;font-size:14px;color:#e2e8f0;padding:6px 12px;border-radius:999px;border:1px solid rgba(148,163,184,.35);background:rgba(15,23,42,.55);min-width:58px;text-align:center}

    /* Hidden by default */
    .tabpanel{display:none}
    .tabpanel.active{display:block}

    /* ===== Reviews ===== */
    .reviews-wrap{display:flex;gap:20px;margin-top:6px}
    .rating-summary{flex:1.1;background:#fff;border:1px solid var(--ring);border-radius:14px;padding:16px}
    .rating-head{display:flex;gap:16px;align-items:center}
    .rating-big{font-size:48px;font-weight:800}
    .star-row{display:flex;align-items:center;gap:8px;margin:6px 0}
    .bar{flex:1;height:8px;background:var(--gray);border-radius:999px;overflow:hidden}
    .bar>span{display:block;height:100%;background:#fbbf24}
    .chips{margin-top:8px;display:grid;grid-template-columns:1fr;gap:6px}
    .chip{display:flex;align-items:center;gap:8px}
    .chip i{font-style:normal}
    .chip .pct{font-weight:700}

    .reviews{flex:2;background:#fff;border:1px solid var(--ring);border-radius:14px;padding:12px}
    .rv-card{border-bottom:1px solid var(--ring);padding:14px 6px}
    .rv-head{display:flex;align-items:center;gap:10px}
    .badge{background:#ef4444;color:#fff;font-size:11px;padding:2px 6px;border-radius:6px;margin-left:6px}
    .meta{color:#64748b;font-size:12px;margin-top:2px}
    .rv-body{margin:8px 0 10px;line-height:1.6}
    .rv-actions{display:flex;gap:14px;font-size:13px;color:#475569}
    .rv-actions button{background:transparent;border:0;cursor:pointer}
    .thumbs{display:flex;gap:6px;align-items:center}
    .mini-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:10px 0}
    .mini-grid img{width:100%;height:74px;object-fit:cover;border-radius:8px}

    .give-rating{margin-top:14px;border-top:1px dashed var(--ring);padding-top:14px}
    .star-input{display:flex;gap:6px;font-size:26px;cursor:pointer}
    .star-input button{background:transparent;border:0;cursor:pointer;line-height:1}
    .star-input .on{color:#f59e0b}
    .star-input .off{color:#cbd5e1}
    .review-form textarea{width:100%;min-height:90px;border:1px solid var(--ring);border-radius:10px;padding:10px;resize:vertical}
    .review-form .row{display:flex;gap:10px;margin-top:8px}
    .btn{background:var(--brand);color:#fff;border:0;padding:10px 16px;border-radius:10px;cursor:pointer}
    .btn.secondary{background:#e5e7eb;color:#111827}

    /* ===== Login modal ===== */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:16px}
    .modal.open{display:flex}
    .sheet{background:#fff;width:min(480px,92vw);border-radius:16px;padding:22px;box-shadow:0 10px 30px rgba(0,0,0,.2);position:relative}
    .sheet h3{margin:0 0 10px;text-align:center}
    .sheet .x{position:absolute;right:12px;top:10px;border:0;background:transparent;font-size:22px;cursor:pointer}
    .input{width:100%;border:1px solid var(--ring);border-radius:10px;padding:12px 14px;font-size:15px}
    .or{display:flex;align-items:center;gap:10px;margin:16px 0;color:#64748b}
    .or:before,.or:after{content:"";height:1px;background:var(--ring);flex:1}
    .oauth{display:grid;gap:10px}
    .oauth button{width:100%;background:#fff;border:1px solid var(--ring);border-radius:10px;padding:10px 14px;text-align:left;cursor:pointer}
    .hint{font-size:12px;color:#64748b;margin-top:6px}

    @media (max-width:960px){
      .content{flex-direction:column}
      .info{order:2}
      .map{order:1}
      .reviews-wrap{flex-direction:column}
    }
  </style>
</head>
<body>
  <div class="cafe-detail" id="dialog">
    <div class="header">
      <h2>HOLA - Homemade</h2>
      <button class="close-btn" id="closeBtn" aria-label="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á">‡∏õ‡∏¥‡∏î</button>
    </div>

    <div class="tabs" role="tablist" aria-label="Cafe sections">
      <button class="tab active" role="tab" aria-selected="true" data-target="jpg-tab">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
      <button class="tab" role="tab" aria-selected="false" data-target="map-tab">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</button>
      <button class="tab" role="tab" aria-selected="false" data-target="menu-tab">‡πÄ‡∏°‡∏ô‡∏π</button>
      <button class="tab" role="tab" aria-selected="false" data-target="3d-tab">‡πÇ‡∏°‡πÄ‡∏î‡∏• 3D</button>
      <button class="tab" role="tab" aria-selected="false" data-target="review-tab">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
    </div>

    <div class="content">
      <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û -->
      <section id="jpg-tab" class="info tabpanel active" role="tabpanel" aria-label="‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">
        <div class="gallery-container" id="gallery" tabindex="0" aria-roledescription="carousel" aria-label="‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û">
          <div class="slides" id="slides">
            <img src="Hola4.jpg" srcset="Dilly Lazy_1200.jpg 1x, Dilly Lazy_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≤‡∏ô Dilly Lazy ‡∏°‡∏∏‡∏°‡∏Å‡∏≤‡πÅ‡∏ü">
            <img src="Hola1.jpg" srcset="Dilly Lazy2_1200.jpg 1x, Dilly Lazy2_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡πÇ‡∏ã‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡πâ‡∏≤‡∏ô">
            <img src="Hola2.jpg" srcset="Dilly Lazy3_1200.jpg 1x, Dilly Lazy3_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡∏°‡∏∏‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">
            <img src="Hola3.jpg" srcset="Dilly Lazy3_1200.jpg 1x, Dilly Lazy3_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡∏°‡∏∏‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">
            <img src="Hola5.jpg" srcset="Dilly Lazy3_1200.jpg 1x, Dilly Lazy3_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡∏°‡∏∏‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">
            <img src="Hola6.jpg" srcset="Dilly Lazy3_1200.jpg 1x, Dilly Lazy3_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡∏°‡∏∏‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">
            <img src="Hola7.jpg" srcset="Dilly Lazy3_1200.jpg 1x, Dilly Lazy3_2400.jpg 2x" sizes="(max-width: 960px) 100vw, 600px" alt="‡∏°‡∏∏‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">
          </div>
          <button class="gallery-btn prev" id="prevBtn" aria-label="‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">‚ùÆ</button>
          <button class="gallery-btn next" id="nextBtn" aria-label="‡∏£‡∏π‡∏õ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">‚ùØ</button>
        </div>
      </section>

      <!-- ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà -->
      <section id="map-tab" class="map tabpanel" role="tabpanel" aria-label="‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà">
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3875.7076440563783!2d100.52936231525226!3d13.73671750118957!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x30e29edc4e0d8d15%3A0xd2c44b0b3c52ce7!2sSiam%20Paragon!5e0!3m2!1sth!2sth!4v1695015301234!5m2!1sth!2sth"
          allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </section>

      <!-- ‡πÄ‡∏°‡∏ô‡∏π -->
      <section id="menu-tab" class="info tabpanel" role="tabpanel" aria-label="‡πÄ‡∏°‡∏ô‡∏π">
        <div class="menu-dark">
          <h3>‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</h3>
          <ul class="drink-list">
            <li class="drink-item" data-name="‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà" data-price="55">
              <span class="drink-name">‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤‡πÇ‡∏ô‡πà</span><span class="price">‡∏ø55</span>
            </li>
            <li class="drink-item" data-name="‡∏•‡∏≤‡πÄ‡∏ï‡πâ‡πÄ‡∏¢‡πá‡∏ô" data-price="65">
              <span class="drink-name">‡∏•‡∏≤‡πÄ‡∏ï‡πâ‡πÄ‡∏¢‡πá‡∏ô</span><span class="price">‡∏ø65</span>
            </li>
            <li class="drink-item" data-name="‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß" data-price="60">
              <span class="drink-name">‡∏ä‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</span><span class="price">‡∏ø60</span>
            </li>
            <li class="drink-item" data-name="‡∏Ñ‡∏£‡∏≠‡∏ü‡πÄ‡∏ü‡∏¥‡∏•" data-price="79">
              <span class="drink-name">‡∏Ñ‡∏£‡∏≠‡∏ü‡πÄ‡∏ü‡∏¥‡∏•</span><span class="price">‡∏ø79</span>
            </li>
          </ul>
        </div>
        <div class="menu-dark" style="margin-top:20px">
          <h3>‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô</h3>
          <ul class="drink-list">
            <li class="drink-item
                data-name="‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡πÇ‡∏Æ‡∏°‡πÄ‡∏°‡∏î 1 ‡∏™‡∏Å‡∏π‡πä‡∏õ" data-price="59">
                <span class="drink-name">‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°‡πÇ‡∏Æ‡∏°‡πÄ‡∏°‡∏î 1 ‡∏™‡∏Å‡∏π‡πä‡∏õ</span><span class="price">‡∏ø59</span>
            </li>
      </section>

      <!-- 3D -->
      <section id="3d-tab" class="info tabpanel" role="tabpanel" aria-label="‡πÇ‡∏°‡πÄ‡∏î‡∏• 3D">
        <p>‡πÇ‡∏°‡πÄ‡∏î‡∏• 3D ‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏£‡πá‡∏ß ‡πÜ ‡∏ô‡∏µ‡πâ!</p>
      </section>

      <!-- ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
      <section id="review-tab" class="tabpanel" role="tabpanel" aria-label="‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" style="width:100%">
        <div class="reviews-wrap">
          <!-- ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏£‡∏ï‡∏ï‡∏¥‡πâ‡∏á -->
          <aside class="rating-summary">
            <div class="rating-head">
              <div class="rating-big" id="avgScore">0.0</div>
              <div>
                <div id="totalReviews" class="meta">0 ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</div>
                <div id="avgStars" aria-hidden="true" style="font-size:18px;margin-top:2px"></div>
                <div class="hint">‡∏à‡∏≤‡∏Å 5 ‡∏î‡∏≤‡∏ß</div>
              </div>
            </div>
            <div id="bars" style="margin-top:10px">
              <!-- ‡πÉ‡∏™‡πà‡πÅ‡∏ñ‡∏ö‡∏™‡∏£‡∏∏‡∏õ 5‚Üí1 -->
            </div>

            <div class="chips">
              <div class="chip"><i>üëØ</i><span><span class="pct" id="fitFriends">0%</span> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö: ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ù‡∏π‡∏á</span></div>
              <div class="chip"><i>üíò</i><span><span class="pct" id="fitCouple">0%</span> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö: ‡∏Ñ‡∏π‡πà‡∏£‡∏±‡∏Å</span></div>
              <div class="chip"><i>üë®‚Äçüë©‚Äçüëß</i><span><span class="pct" id="fitFamily">0%</span> ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö: ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß/‡πÄ‡∏î‡πá‡∏Å</span></div>
            </div>

            <div class="give-rating">
              <h4 style="margin:8px 0 6px">‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</h4>
              <div class="star-input" id="starInput" aria-label="‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 1 ‡∏ñ‡∏∂‡∏á 5 ‡∏î‡∏≤‡∏ß"></div>
              <form id="reviewForm" class="review-form">
                <textarea id="reviewText" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì..."></textarea>
                <div class="row">
                  <button type="submit" class="btn">‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
                  <button type="button" class="btn secondary" id="loginBtn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</button>
                </div>
                <div class="hint">‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</div>
              </form>
            </div>
          </aside>

          <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡∏ß‡∏¥‡∏ß -->
          <div class="reviews">
            <div id="reviewsList"></div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- Modal ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô -->
  <div class="modal" id="loginModal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
      <button class="x" id="closeLogin" aria-label="‡∏õ‡∏¥‡∏î">√ó</button>
      <h3 id="loginTitle">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
      <input class="input" id="loginIdentity" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£/‡∏≠‡∏µ‡πÄ‡∏°‡∏•" />
      <button class="btn" id="doLogin" style="width:100%;margin-top:10px">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
      <div class="or">‡∏´‡∏£‡∏∑‡∏≠</div>
      <div class="oauth">
        <button id="loginFB">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Facebook</button>
        <button id="loginLINE">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ LINE</button>
        <button id="loginGG">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google</button>
      </div>
      <div class="hint">* ‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏î‡πÇ‡∏°: ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
    </div>
  </div>

  <script>
    /** ---------- Tabs ---------- **/
    const tabButtons = document.querySelectorAll('.tab');
    const tabs = document.querySelectorAll('.tabpanel');
    tabButtons.forEach(btn=>{
      btn.addEventListener('click',()=>{
        tabButtons.forEach(b=>b.classList.remove('active')); btn.classList.add('active');
        const targetId = btn.dataset.target;
        tabs.forEach(p=>p.classList.toggle('active', p.id===targetId));
        if(targetId==='jpg-tab') document.getElementById('gallery')?.focus();
      });
    });

    /** Close main dialog (demo) **/
    document.getElementById('closeBtn').addEventListener('click',()=>{document.getElementById('dialog').style.display='none';});
    document.addEventListener('keydown',(e)=>{if(e.key==='Escape') document.getElementById('dialog').style.display='none';});

    /** ---------- Gallery ---------- **/
    let currentIndex = 0;
    const slidesEl = document.getElementById('slides');
    const totalSlides = slidesEl.children.length;
    function goTo(idx){ currentIndex=(idx+totalSlides)%totalSlides; slidesEl.style.transform=`translateX(${-currentIndex*100}%)`; }
    document.getElementById('prevBtn').addEventListener('click',()=>goTo(currentIndex-1));
    document.getElementById('nextBtn').addEventListener('click',()=>goTo(currentIndex+1));
    document.getElementById('gallery').addEventListener('keydown',(e)=>{ if(e.key==='ArrowLeft') goTo(currentIndex-1); else if(e.key==='ArrowRight') goTo(currentIndex+1); });
    goTo(0);

    /** Menu click **/
    document.querySelectorAll('.drink-item').forEach(li=>{
      li.addEventListener('click',()=>{ alert(`${li.dataset.name} ‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏ø${li.dataset.price}`); });
    });

    /** ---------- Reviews (demo data + logic) ---------- **/
    const demoReviews = [
      {
        user: "chubbypenguinvy üßã", elite: true, stars: 4, date: "10 ‡∏û.‡∏¢. 2023",
        text: "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡πÇ‡∏Æ‡∏°‡∏°‡∏µ ‡∏ü‡∏µ‡∏•‡∏ä‡∏¥‡∏• ‡πÉ‡∏Å‡∏•‡πâ‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡πÇ‡∏ã‡∏ô outdoor ‡πÅ‡∏•‡∏∞ indoor ‡∏Å‡∏≤‡πÅ‡∏ü‡∏î‡∏µ ‡∏Ç‡∏ô‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢ üç∞",
        images: ["https://picsum.photos/seed/a/240/160","https://picsum.photos/seed/b/240/160","https://picsum.photos/seed/c/240/160","https://picsum.photos/seed/d/240/160"],
        likes: 4, comments: 0, views: 475, fit:"friends"
      },
      {
        user: "Yee_FullandFun", elite: true, stars: 4, date: "30 ‡∏™.‡∏Ñ. 2022",
        text: "‡∏£‡πâ‡∏≤‡∏ô‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÇ‡∏•‡πà‡∏á ‡∏ô‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏¢‡∏≤‡∏ß ‡πÜ ‡∏°‡∏µ‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏û‡∏£‡πâ‡∏≠‡∏° ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡πÄ‡∏£‡πá‡∏ß‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö",
        images: ["https://picsum.photos/seed/e/240/160","https://picsum.photos/seed/f/240/160","https://picsum.photos/seed/g/240/160","https://picsum.photos/seed/h/240/160"],
        likes: 2, comments: 1, views: 964, fit:"couple"
      },
      { user: "Praewpailin TsuYu", elite:false, stars:2, date:"12 ‡∏Å.‡∏û. 2024", text:"‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏µ", images:[], likes:1, comments:0, views:102, fit:"family" }
    ];
    const state = {
      reviews: JSON.parse(localStorage.getItem("reviews_igear")||"null") || demoReviews,
      me: JSON.parse(localStorage.getItem("me_demo")||"null")
    };

    const barsEl = document.getElementById('bars');
    const avgScoreEl = document.getElementById('avgScore');
    const avgStarsEl = document.getElementById('avgStars');
    const totalReviewsEl = document.getElementById('totalReviews');
    const fitFriendsEl = document.getElementById('fitFriends');
    const fitCoupleEl = document.getElementById('fitCouple');
    const fitFamilyEl = document.getElementById('fitFamily');
    const listEl = document.getElementById('reviewsList');

    function starString(n, size=16){
      return '‚òÖ'.repeat(n)+'‚òÜ'.repeat(5-n);
    }

    function renderSummary(){
      const total = state.reviews.length || 0;
      const sum = state.reviews.reduce((a,b)=>a+b.stars,0);
      const avg = total? (sum/total) : 0;
      avgScoreEl.textContent = avg.toFixed(1);
      avgStarsEl.textContent = starString(Math.round(avg));
      totalReviewsEl.textContent = `${total} ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß`;

      // breakdown 5‚Üí1
      barsEl.innerHTML = "";
      for(let s=5;s>=1;s--){
        const cnt = state.reviews.filter(r=>r.stars===s).length;
        const pct = total? Math.round((cnt/total)*100):0;
        const row = document.createElement('div'); row.className='star-row';
        row.innerHTML = `<span style="width:28px;text-align:right">${s}</span><span style="color:#f59e0b">‚òÖ</span>
          <div class="bar"><span style="width:${pct}%"></span></div>
          <span style="width:34px;text-align:right;color:#475569">${pct}%</span>`;
        barsEl.appendChild(row);
      }

      // fit tags (‡πÄ‡∏î‡πÇ‡∏°‡πà‡∏à‡∏≤‡∏Å field r.fit)
      const friends = Math.round(100*state.reviews.filter(r=>r.fit==='friends').length/Math.max(1,total));
      const couple  = Math.round(100*state.reviews.filter(r=>r.fit==='couple').length/Math.max(1,total));
      const family  = Math.round(100*state.reviews.filter(r=>r.fit==='family').length/Math.max(1,total));
      fitFriendsEl.textContent = friends+"%";
      fitCoupleEl.textContent  = couple+"%";
      fitFamilyEl.textContent  = family+"%";
    }

    function renderList(){
      listEl.innerHTML = "";
      state.reviews.forEach(r=>{
        const card = document.createElement('div'); card.className='rv-card';
        const elite = r.elite ? `<span class="badge">Elite</span>` : "";
        const grid = r.images?.length ? `
          <div class="mini-grid">
            ${r.images.slice(0,4).map(src=>`<img src="${src}" alt="‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏†‡∏≤‡∏û">`).join("")}
          </div>` : "";
        card.innerHTML = `
          <div class="rv-head"><strong>${r.user}</strong> ${elite}</div>
          <div class="meta">${'‚òÖ'.repeat(r.stars)}${'‚òÜ'.repeat(5-r.stars)} ¬∑ ${r.date} ¬∑ ‡∏î‡∏π‡πÅ‡∏•‡πâ‡∏ß ${r.views ?? Math.floor(200+Math.random()*800)}</div>
          <div class="rv-body">${r.text}</div>
          ${grid}
          <div class="rv-actions">
            <span class="thumbs">üëç <span>${r.likes||0}</span></span>
            <button>üí¨ ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå</button>
            <button>üîó ‡πÅ‡∏ä‡∏£‡πå</button>
          </div>
        `;
        listEl.appendChild(card);
      });
    }

    renderSummary(); renderList();

    /** ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏≤‡∏ß) **/
    const starInputEl = document.getElementById('starInput');
    let draftStars = 0;
    for(let i=1;i<=5;i++){
      const b=document.createElement('button');
      b.type="button";
      b.dataset.value=i;
      b.className="off";
      b.textContent="‚òÖ";
      b.addEventListener('mouseenter',()=>paint(i));
      b.addEventListener('mouseleave',()=>paint(draftStars));
      b.addEventListener('click',()=>{ draftStars=i; paint(draftStars); });
      starInputEl.appendChild(b);
    }
    function paint(n){[...starInputEl.children].forEach((el,idx)=>{el.className=(idx< n)?'on':'off';})}

    /** ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏£‡∏µ‡∏ß‡∏¥‡∏ß (‡∏ï‡πâ‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô) **/
    const reviewForm = document.getElementById('reviewForm');
    const reviewText = document.getElementById('reviewText');
    reviewForm.addEventListener('submit',(e)=>{
      e.preventDefault();
      if(!state.me){ openLogin(); return; }
      if(!draftStars){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏î‡∏≤‡∏ß'); return; }
      const txt = reviewText.value.trim();
      if(!txt){ alert('‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡πâ‡∏≤'); return; }
      const now = new Date();
      const review = {
        user: state.me.name, elite:false, stars:draftStars,
        date: now.toLocaleDateString('th-TH',{day:'2-digit',month:'short',year:'numeric'}),
        text: txt, images:[], likes:0, comments:0, views: 1 + Math.floor(Math.random()*50), fit:"friends"
      };
      state.reviews.unshift(review);
      localStorage.setItem('reviews_igear', JSON.stringify(state.reviews));
      reviewText.value=""; draftStars=0; paint(0);
      renderSummary(); renderList();
      alert('‡∏™‡πà‡∏á‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞!');
    });

    document.getElementById('loginBtn').addEventListener('click', openLogin);

    /** ---------- Modal Login (‡∏à‡∏≥‡∏•‡∏≠‡∏á) ---------- **/
    const loginModal = document.getElementById('loginModal');
    function openLogin(){ loginModal.classList.add('open'); loginModal.setAttribute('aria-hidden','false'); }
    function closeLogin(){ loginModal.classList.remove('open'); loginModal.setAttribute('aria-hidden','true'); }
    document.getElementById('closeLogin').addEventListener('click', closeLogin);

    function finishLogin(name){
      state.me = { name };
      localStorage.setItem('me_demo', JSON.stringify(state.me));
      closeLogin();
      alert(`‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ${name} ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢`);
    }
    document.getElementById('doLogin').addEventListener('click',()=>{
      const id = (document.getElementById('loginIdentity').value||"").trim();
      if(!id) return alert('‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞');
      finishLogin(id);
    });
    document.getElementById('loginFB').addEventListener('click',()=>finishLogin('‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ Facebook'));
    document.getElementById('loginLINE').addEventListener('click',()=>finishLogin('‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ LINE'));
    document.getElementById('loginGG').addEventListener('click',()=>finishLogin('‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ Google'));
  </script>
</body>
</html>
